
<div class="topbar">
  <div class="logo">
    <img src="assets/logo-eng.jpg" alt="ENG Logo" />
    <span class="site-name">Gestion des parcs des √©quipements</span>
  </div>
  <div class="menu-center">
    <!-- Accueil -->
    <a class="menu-button" href="#">Dashbord</a>
  
    <!-- √âquipement -->
    <a class="menu-button" href="#">√âquipement</a>
  
    <!-- Utilisateur -->
    <a class="menu-button" href="#">Utilisateur</a>
  
    <!-- Mouvement -->
    <div class="dropdown">
      <button class="menu-button">Mouvement</button>
      <div class="dropdown-content">
        <a href="#">R√©forme</a>
        <a href="#">R√©affectation</a>
        <a href="#">Pr√™t</a>
      </div>
    </div>
  
    <!-- Codification -->
    <div class="dropdown">
      <button class="menu-button">Table de Codification</button>
      <div class="dropdown-content">
        <a href="http://localhost:4200/groupeidentique">Groupe Identique</a>
        <a href="http://localhost:4200/organe">Organe</a>
        <a href="http://localhost:4200/unite">Unit√©</a>
        <a href="http://localhost:4200/categorie">Cat√©gorie</a>
        <a href="http://localhost:4200/typeeq">Type</a>
        <a href="http://localhost:4200/caracteristique">Caract√©ristique</a>
        <a href="http://localhost:4200/marque">Marque</a>
      </div>
    </div>
  </div>

  <div class="profile" (click)="profileOpen = !profileOpen">
    <img class="profile-img" src="assets/user.png" alt="Profil utilisateur" />
    <span class="profile-name">{{ username }}</span>
    <div class="profile-menu" *ngIf="profileOpen">
      <div class="menu-username">{{ username }}</div>
      <button class="logout-btn" (click)="logout()">D√©connexion</button>
    </div>
  </div>
</div>

<div class="container">
  <div class="toolbar">
    <input class="form-control"  type="text" [(ngModel)]="searchTerm" placeholder="üîç Rechercher..." (input)="onSearch()" />
    <select class="form-control"  [(ngModel)]="sortBy" (change)="onSearch()">
      <option value="designation">Code </option>
      <option value="typeEquipNom">Type</option>
      <option value="marqueNom">Marque</option>
    </select>
    <button class="btn sort-btn" (click)="toggleSort(sortBy)">
      <span class="arrow">{{ ascending ? '‚ñ≤' : '‚ñº' }}</span>
    </button>
  </div>
  <table>
    <thead>
      <tr>
        <th>Code </th>
        <th>Marque</th>
        <th>Type</th>
        <th>Organes</th>
        <th>Caract√©ristiques</th>
        <th style="text-align: left;">
          <span style="display: inline-block; transform: translateX(200px);">Actions</span>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let groupe of groupes">
        <td>{{ groupe.CodeGrp  }}</td>
        <td>{{ groupe.marqueNom }}</td>
        <td>{{ groupe.typeEquipNom }}</td>
        <td>
          <ul>
            <li *ngFor="let organe of groupe.organes">{{ organe }}</li>
          </ul>
        </td>
        <td>
          <ul>
            <li *ngFor="let caracteristique of groupe.caracteristiques">{{ caracteristique }}</li>
          </ul>
        </td>
        <td>
          <button class="btn btn-warning me-2" (click)="edit(groupe.id)">‚úèÔ∏è</button>
            <button class="btn btn-danger orange" (click)="delete(groupe.id)">üóëÔ∏è</button>
        </td>
      </tr>
    </tbody>
  </table>
  


  <div class="modal" *ngIf="showForm">
    <div class="modal-content">
      <h2>Modifier un Organe</h2>
  
      <form  class="form-container">
        <div class="form-group">  <label>D√©signation</label>
          <input [(ngModel)]="groupe.designation" name="designation" placeholder="D√©signation"  required />
      
        </div><!-- Caract√©ristiques -->
        <div class="form-group">  
          <label>Caract√©ristiques</label>
          <div *ngFor="let c of caracteristiques">
            <input type="checkbox" 
                   [value]="c.id" 
                   (change)="toggleCarac(c.id)" 
                   [checked]="groupe.caracteristiques.includes(c.id)" />
            {{ c.libelle }}
          </div>
        </div>
        
        <!-- Organes -->
        <div class="form-group">  
          <label>Organes</label>
          <div *ngFor="let o of organes">
            <input type="checkbox" 
                   [value]="o.id" 
                   (change)="toggleOrgane(o.id)" 
                   [checked]="groupe.organes.includes(o.id)"  />
            {{ o.libelle }}
          </div>
        </div>
        
    <div class="form-group">
    <div class="actions">
      <button class="btn orange" type="submit" (click)="save()">üíæ Enregistrer</button>

      <button class="btn grey" type="submit"  (click)="closeForm()">‚ùå Annuler</button>
    </div></div>
  </form>
</div>
