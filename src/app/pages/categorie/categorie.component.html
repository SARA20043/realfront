<!-- Topbar (identique pour toutes les pages) -->
<div class="topbar">
    <div class="logo">
      <img src="assets/logo-eng.jpg" alt="ENG Logo" />
    </div>
  
    <div class="menu-center">
      <a class="menu-button" href="#">Accueil</a>
      <a class="menu-button" href="#">√âquipement</a>
      <a class="menu-button" href="#">Utilisateur</a>
  
      <div class="dropdown">
        <button class="menu-button">Mouvement</button>
        <div class="dropdown-content">
          <a href="#">R√©forme</a>
          <a href="#">R√©affectation</a>
          <a href="#">Pr√™t</a>
        </div>
      </div>
  
      <div class="dropdown">
        <button class="menu-button">Codification</button>
        <div class="dropdown-content">
          <a href="http://localhost:4200/organe">Organe</a>
          <a href="http://localhost:4200/marque">Marque</a>
          <a href="http://localhost:4200/caracteristique">Caract√©ristique</a>
          <a href="http://localhost:4200/typeq">Type</a>
          <a href="http://localhost:4200/unite">Unit√©</a>
          <a href="http://localhost:4200/groupeidentique">Groupe Identique</a>
        </div>
      </div>
    </div>
  
    <div class="profile" (click)="profileOpen = !profileOpen">
      <img class="profile-img" src="assets/user.png" alt="Profil utilisateur" />
      <span class="profile-name">{{ username }}</span>
      <div class="profile-menu" *ngIf="profileOpen">
        <div class="menu-username">{{ username }}</div>
        <button class="logout-btn" (click)="logout()">D√©connexion</button>
      </div>
    </div>
  </div>
  
  <!-- Container principal -->
  <div class="container">
    <!-- Toolbar de recherche et tri -->
    <div class="toolbar">
      <input class="form-control" type="text" [(ngModel)]="searchTerm" placeholder="üîç Rechercher..." (input)="search()" />
  
      <select class="form-control" [(ngModel)]="sortBy" (change)="search()">
        <option value="idcategorie">ID</option>
        <option value="categorie_principale">Cat√©gorie Principale</option>
        <option value="codecategorie">Code</option>
        <option value="designation">D√©signation</option>
      </select>
  
      <button class="btn sort-btn" (click)="toggleSort(sortBy)">
        <span class="arrow">{{ ascending ? '‚ñ≤' : '‚ñº' }}</span>
      </button>
  
      <div class="spacer"></div>
      <button class="btn orange" (click)="openForm()">+ Nouvelle Cat√©gorie</button>
    </div>
  
    <!-- Titre -->
    <h2 class="header">Liste des Cat√©gories</h2>
  
    <!-- Tableau -->
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Cat√©gorie Principale</th>
          <th>Code</th>
          <th>D√©signation</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let categorie of categories">
          <td>{{ categorie.idcategorie }}</td>
          <td>{{ categorie.categorie_principale }}</td>
          <td>{{ categorie.codecategorie }}</td>
          <td>{{ categorie.designation }}</td>
          <td>
            <button class="btn btn-warning me-2" (click)="openForm(categorie)">‚úèÔ∏è</button>
            <button class="btn btn-danger orange" (click)="deleteCategorie(categorie)">üóëÔ∏è</button>
          </td>
        </tr>
      </tbody>
    </table>
  
    <!-- Modal Formulaire -->
    <div class="modal" *ngIf="showForm">
      <div class="form">
        <h3>{{ selectedCategorie ? 'Modifier' : 'Ajouter' }} une Cat√©gorie</h3>
  
        <select class="form-control" [(ngModel)]="categorie_input.categorie_principale">
          <option *ngFor="let option of categoriePrincipaleOptions" [value]="option">{{ option }}</option>
        </select>
  
        <input class="form-control" type="text" [(ngModel)]="categorie_input.designation" placeholder="D√©signation" />
  
        <div class="actions">
          <button class="btn orange" (click)="saveCategorie()">üíæ Enregistrer</button>
          <button class="btn grey" (click)="closeForm()">‚ùå Annuler</button>
        </div>
      </div>
    </div>
  </div>
  