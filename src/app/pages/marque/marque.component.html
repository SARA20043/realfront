<div class="topbar">
  <div class="logo">
    <img src="assets/logo-eng.jpg" alt="ENG Logo" />
  </div>

  <div class="menu-center">
    <!-- Accueil -->
    <a class="menu-button" href="#" >Acceuil</a>
  
    <!-- √âquipement -->
    <a class="menu-button" href="#">√âquipement</a>
  
    <!-- Utilisateur -->
    <a class="menu-button" href="#">Utilisateur</a>
  
    <!-- Mouvement -->
    <div class="dropdown">
      <button class="menu-button">Mouvement</button>
      <div class="dropdown-content">
        <a href="#">R√©forme</a>
        <a href="#">R√©affectation</a>
        <a href="#">Pr√™t</a>
      </div>
    </div>
  
    <!-- Codification -->
    <div class="dropdown">
      <button class="menu-button">Codification</button>
      <div class="dropdown-content">
        <a href="http://localhost:4200/organe">Organe</a>
        <a href="http://localhost:4200/unite">Unit√©</a>
        <a href="http://localhost:4200/categorie">Cat√©gorie</a>
        <a href="http://localhost:4200/typeq">Type</a>
        <a href="http://localhost:4200/caracteristique">Caract√©ristique</a>
        <a href="http://localhost:4200/groupeidentique">Groupe Identique</a>
      </div>
    </div>
  </div>

  <div class="profile" (click)="profileOpen = !profileOpen">
    <img class="profile-img" src="assets/user.png" alt="Profil utilisateur" />
    <span class="profile-name">{{ username }}</span>
    <div class="profile-menu" *ngIf="profileOpen">
      <div class="menu-username">{{ username }}</div>
      <button class="logout-btn" (click)="logout()">D√©connexion</button>
    </div>
  </div>
</div>

<div class="container">
  <div class="toolbar">
    <input class="form-control" type="text" [(ngModel)]="searchTerm" placeholder="üîç Rechercher..." (input)="search()" />
    <select class="form-control" [(ngModel)]="sortBy" (change)="search()">
      <option value="idmarque">ID</option>
      <option value="codemarque">Code</option>
      <option value="nom_fabriquant">Nom Fabricant</option>
    </select>
    <button class="btn sort-btn" (click)="toggleSort(sortBy)">
      <span class="arrow">{{ ascending ? '‚ñ≤' : '‚ñº' }}</span>
    </button>
    <div class="spacer"></div>
    <button class="btn orange" (click)="openForm()">+ Nouvelle Marque</button>
  </div>

  <h2 class="header">Liste des Marques</h2>

  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Code</th>
        <th>Nom Fabricant</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let m of marques">
        <td>{{ m.idmarque }}</td>
        <td>{{ m.codemarque }}</td>
        <td>{{ m.nom_fabriquant }}</td>
        <td>
          <button class="btn btn-warning me-2" (click)="openForm(m)">‚úèÔ∏è</button>
          <button class="btn btn-danger orange" (click)="deleteMarque(m)">üóëÔ∏è</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="modal" *ngIf="showForm">
    <div class="form">
      <h3>{{ selectedMarque ? 'Modifier' : 'Ajouter' }} une Marque</h3>
      <input class="form-control" type="text" [(ngModel)]="nom_fabriquant_input" placeholder="Nom du fabricant" />
      <div class="actions">
        <button class="btn orange" (click)="saveMarque()">üíæ Enregistrer</button>
        <button class="btn grey" (click)="closeForm()">‚ùå Annuler</button>
      </div>
    </div>
  </div>
</div>
